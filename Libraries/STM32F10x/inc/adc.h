#ifndef _ADC_H_
#define _ADC_H_

#include "sys.h"

static double sensor_obj_params[][3] = {
{-0.356004969,	13.23001394,	1.04531434},
{-0.355600929,	13.17338921,	1.956753893},
{-0.355197571,	13.11332243,	2.929532512},
{-0.354794903,	13.06033228,	3.769457679},
{-0.354392917,	13.01090442,	4.542177453},
{-0.353991615,	12.95173181,	5.491766487},
{-0.353590994,	12.89122686,	6.463074477},
{-0.353191053,	12.83988077,	7.265206822},
{-0.352791789,	12.78579728,	8.115253625},
{-0.352393202,	12.7268856,	9.050500011},
{-0.351995292,	12.66455009,	10.04475532},
{-0.351598054,	12.6120525,	10.85957393},
{-0.351201487,	12.54915479,	11.85841277},
{-0.350805593,	12.48772181,	12.82801522},
{-0.350410367,	12.42148253,	13.87983796},
{-0.350015808,	12.35740618,	14.88979797},
{-0.349621916,	12.29270626,	15.90733463},
{-0.349228687,	12.23225108,	16.84705039},
{-0.348836122,	12.1739487,	17.74628646},
{-0.348444219,	12.11293365,	18.69002644},
{-0.348052976,	12.05268128,	19.6175364},
{-0.34766239,	11.98555887,	20.66056396},
{-0.347272463,	11.92197867,	21.63885106},
{-0.346883191,	11.85708376,	22.63617271},
{-0.346494572,	11.79433939,	23.59325002},
{-0.346106607,	11.73028086,	24.56924766},
{-0.345719292,	11.66421856,	25.575492},
{-0.345332629,	11.59684729,	26.5998378},
{-0.344946613,	11.53231556,	27.57262188},
{-0.344561245,	11.46509329,	28.58649034},
{-0.34417652,	11.38966271,	29.73210678},
{-0.34379244,	11.31569613,	30.84809504},
{-0.343409004,	11.25491277,	31.74287862},
{-0.343026208,	11.1893733,	32.71203557},
{-0.342644052,	11.12184064,	33.70960971},
{-0.342262533,	11.0509414,	34.75727361},
{-0.341881652,	10.98837679,	35.66619818},
{-0.341501407,	10.92175623,	36.63645167},
{-0.341121795,	10.85589695,	37.59041008},
{-0.340742815,	10.78324257,	38.64784156},
{-0.340364468,	10.71684692,	39.60152623},
{-0.33998675,	10.6477807,	40.59282868},
{-0.339609661,	10.57330563,	41.6636861},
{-0.339233198,	10.50028374,	42.70641052},
{-0.338857362,	10.425288,	43.77409867},
{-0.338482148,	10.36132807,	44.66717616},
{-0.338107558,	10.29949144,	45.52399368},
{-0.33773359,	10.22336366,	46.59364503},
{-0.337360241,	10.1500537,	47.61483507},
{-0.336987512,	10.07272656,	48.69050181},
{-0.3366154,	9.994119516,	49.77880637}
    };
		
typedef enum
{
	ADC_SS_NoEffect = 0,
	ADC_SS_Start
}ADC_SS_TypeDef;

typedef enum
{
	ADC_MUX_AIN0to1 = 0b000,
	ADC_MUX_AIN0to3 = 0b001,
	ADC_MUX_AIN1to3 = 0b010,
	ADC_MUX_AIN2to3 = 0b011,
	ADC_MUX_AIN0toGND = 0b100,
	ADC_MUX_AIN1toGND = 0b101,
	ADC_MUX_AIN2toGND = 0b110,
	ADC_MUX_AIN3toGND = 0b111
}ADC_MUX_TypeDef;

typedef enum
{
	ADC_PGA_6144 = 0b000,
	ADC_PGA_4096 = 0b001,
	ADC_PGA_2048 = 0b010,
	ADC_PGA_1024 = 0b011,
	ADC_PGA_0512 = 0b100,
	ADC_PGA_0256 = 0b101
}ADC_PGA_TypeDef;

typedef enum
{
	ADC_MODE_Continuous = 0,
	ADC_MODE_SingleShot
}ADC_MODE_TypeDef;

typedef enum
{
	ADC_DR_128 = 0b000,
	ADC_DR_250 = 0b001,
	ADC_DR_490 = 0b010,
	ADC_DR_920 = 0b011,
	ADC_DR_1600 = 0b100,
	ADC_DR_2400 = 0b101,
	ADC_DR_3300 = 0b110
}ADC_DR_TypeDef;

typedef enum
{
	ADC_TS_MODE_ADC = 0,
	ADC_TS_MODE_TemperatureSensor
}ADC_TS_MODE_TypeDef;

typedef enum
{
	ADC_PULL_UP_Disable = 0,
	ADC_PULL_UP_Enable
}ADC_PULL_UP_EN_TypeDef;

typedef struct
{
  ADC_SS_TypeDef ADC_SS;            
                                     
  ADC_MUX_TypeDef ADC_MUX;  
                                 
  ADC_PGA_TypeDef ADC_PGA;

	ADC_MODE_TypeDef ADC_MODE;
	
	ADC_DR_TypeDef ADC_DR;
	
	ADC_TS_MODE_TypeDef ADC_TS_MODE;
	
	ADC_PULL_UP_EN_TypeDef ADC_PULL_UP_EN;
                                 
}ADC_ConfigDef;

#define DEBUG 0

#define ADC_TEMP 0
#define SENSOR_OBJ 1
#define SENSOR_TEMP 2

#define PARAM 1.4

int complement_to_signed(u16 complement);
void ADS1018_Init(void);
u16 ADS1018_ReadData(u8 ch);
double read_ADCTemp(void);
double read_SensorTempR(void);
double read_SensorTemp(void);
double read_SensorObjV(float temp);
double read_SensorObj(float temp);

#endif
